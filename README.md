# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Vite

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/main.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Интернет-магазин «Web-Larёk»

«Web-Larёk» — это интернет-магазин с товарами для веб-разработчиков, где пользователи могут просматривать товары, добавлять их в корзину и оформлять заказы. Сайт предоставляет удобный интерфейс с модальными окнами для просмотра деталей товаров, управления корзиной и выбора способа оплаты, обеспечивая полный цикл покупки с отправкой заказов на сервер.

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP (Model-View-Presenter), которая обеспечивает четкое разделение ответственности между классами слоев Model и View. Каждый слой несет свой смысл и ответственность:

Model - слой данных, отвечает за хранение и изменение данных.  
View - слой представления, отвечает за отображение данных на странице.  
Presenter - презентер содержит основную логику приложения и отвечает за связь представления и данных.

Взаимодействие между классами обеспечивается использованием событийно-ориентированного подхода. Модели и Представления генерируют события при изменении данных или взаимодействии пользователя с приложением, а Презентер обрабатывает эти события используя методы как Моделей, так и Представлений.

### Базовый код

#### Класс Component

Является базовым классом для всех компонентов интерфейса.
Класс является дженериком и принимает в переменной `T` тип данных, которые могут быть переданы в метод `render` для отображения.

Конструктор:  
`constructor(container: HTMLElement)` - принимает ссылку на DOM элемент за отображение, которого он отвечает.

Поля класса:  
`container: HTMLElement` - поле для хранения корневого DOM элемента компонента.

Методы класса:  
`render(data?: Partial<T>): HTMLElement` - Главный метод класса. Он принимает данные, которые необходимо отобразить в интерфейсе, записывает эти данные в поля класса и возвращает ссылку на DOM-элемент. Предполагается, что в классах, которые будут наследоваться от `Component` будут реализованы сеттеры для полей с данными, которые будут вызываться в момент вызова `render` и записывать данные в необходимые DOM элементы.  
`setImage(element: HTMLImageElement, src: string, alt?: string): void` - утилитарный метод для модификации DOM-элементов `<img>`

#### Класс Api

Содержит в себе базовую логику отправки запросов.

Конструктор:  
`constructor(baseUrl: string, options: RequestInit = {})` - В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.

Поля класса:  
`baseUrl: string` - базовый адрес сервера  
`options: RequestInit` - объект с заголовками, которые будут использованы для запросов.

Методы:  
`get(uri: string): Promise<object>` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер  
`post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.  
`handleResponse(response: Response): Promise<object>` - защищенный метод проверяющий ответ сервера на корректность и возвращающий объект с данными полученный от сервера или отклоненный промис, в случае некорректных данных.

#### Класс EventEmitter

Брокер событий реализует паттерн "Наблюдатель", позволяющий отправлять события и подписываться на события, происходящие в системе. Класс используется для связи слоя данных и представления.

Конструктор класса не принимает параметров.

Поля класса:  
`_events: Map<string | RegExp, Set<Function>>)` - хранит коллекцию подписок на события. Ключи коллекции - названия событий или регулярное выражение, значения - коллекция функций обработчиков, которые будут вызваны при срабатывании события.

Методы класса:  
`on<T extends object>(event: EventName, callback: (data: T) => void): void` - подписка на событие, принимает название события и функцию обработчик.  
`emit<T extends object>(event: string, data?: T): void` - инициализация события. При вызове события в метод передается название события и объект с данными, который будет использован как аргумент для вызова обработчика.  
`trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие с передачей в него данных из второго параметра.

### Данные

### Интерфейс IApi

Интерфейс API клиента - определяет контракт для работы с HTTP API
`get<T extends object>(uri: string): Promise<T>;` - // Выполняет GET запрос
`post<T extends object>(uri: string, data: object, method?: ApiPostMethods): Promise<T>;` - Выполняет POST, PUT или DELETE запрос

### Интерфейс IApiResponse<T>

Интерфейс ответа API - стандартная структура ответа от сервера
`total: number;`- Общее количество элементов
`items: T[];` - Массив элементов указанного типа

### Интерфейс IProduct

Описывает данные необходимые для карточки товара

Поля интерфейса:
`id: string` - уникальный идентефикатор
`title: string` - название/заголовок
`price: number | null` - стоимость, цена может быть не указана
`description?: string` - подробное текстовое описание (опциональное поле)
`image?: string` - изображение (опциональное поле)
`category?: string` - категория (опциональное поле)

### Интерфейс IBuyer

Описывает данные пользователя-покупателя

Поля интерфейса:
`payment: TPayment` - выбранный способ оплаты, значение хранит тип с несколькими вариантами на выбор покупателя
`email: string` - контактный адрес электронной почты
`phone: string` - контактный номер телефона
`address: string` - адрес доставки

### Интерфейс IValidationErrors

Интерфейс ошибок валидации - описывает структуру ошибок проверки данных
Все поля опциональны

Поля интерфейса:
`payment?: string;` - сообщение об ошибке способа оплаты
`email?: string;` - сообщение об ошибке email
`phone?: string;` - сообщение об ошибке телефона
`address?: string;` - сообщение об ошибке адреса

### Интерфейс IHeaderData

Описывает данные имеющиеся в хэдере

Поля интерфейса:
`counter: number` - счетчик товаров в корзине

### Интерфейс IGalleryData

Описывает данные имеющиеся в галерее/каталоге

Поля интерфейса:
`galleryList: HTMLElement[]` - контейнер для отображения галереи/каталога

### Интерфейс IModalData

Описывает данные имеющиеся в модальном окне

Поля интерфейса:
`content: HTMLElement` - контейнер для контента модального окна

### Интерфейс ISuccessData

Описывает данные элемента для отображении успешного заказа

Поля интерфейса:
`totalPrice: number` - полная стоимость товаров в заказе

### Интерфейс IFormErrorData

Описывает данные ошибок в формах

Поля интерфейса:
`error: string` - текст ошибок

### Интерфейс IBasketViewData

Описывает данные отображения корзины

Поля интерфейса:
`totalPrice: number` - полная стоимость товаров в корзине
`purchases: IProduct[]` - массив товаров в корзине
`quantity: number` - колличество товаров в корзине
`hasProducts: boolean` - булево значение наличия товаров в корзине

### Интерфейс IBasketViewPresenter

Описывает данные класса - презентора корзины

Поля интерфейса:
`getViewData(): IBasketViewData` - получает актуальные данные из модели корзины для отображения. Собирает информацию о текущих покупках, общей стоимости, количестве товаров и наличии товаров в корзине. Возвращает структурированный объект с данными для представления
`renderCards(items: IProduct[]): HTMLElement[]` - создает и возвращает массив DOM-элементов карточек товаров для отображения в корзине. Для каждого товара из переданного массива создает экземпляр карточки корзины, устанавливает порядковый номер и возвращает отрендеренный DOM-элемент
`render(): HTMLElement` - выполняет полную сборку представления корзины. Создает основной контейнер корзины, наполняет его карточками товаров (если они есть), устанавливает общую стоимость, состояние кнопки оформления заказа и текст сообщения о пустой корзине. Возвращает готовый DOM-элемент для вставки на страницу или модальное окно

### Типы

### Тип ApiPostMethods

`type ApiPostMethods = 'POST' | 'PUT' | 'DELETE';` - Тип HTTP методов - определяет допустимые методы для POST запросов

### Тип TPayment

`type TPayment = 'online' | 'cash' | ''` - тип ограниченных вариантов выбора способа оплаты - онлайн оплата, наличными при получении или может быть не выбран

### Тип TOrder

Тип заказа - структура данных для оформления заказа
`payment: TPayment;` - Способ оплаты
`email: string;` - Email покупателя
`phone: string;` - Телефон покупателя
`address: string;` - Адрес доставки
`total: number;` - Общая сумма заказа
`items: string[];` - Массив ID товаров

### Тип TOrderResponse

Тип ответа на заказ - структура ответа после успешного оформления заказа
`id: string;` - ID созданного заказа
`total: number;` - Общая сумма заказа

### Тип TProductsResponse

`type TProductsResponse = IApiResponse<IProduct>` - Тип ответа с товарами - специализированный тип для ответа с товарами

### Тип TOrdersResponse

`type TOrdersResponse = IApiResponse<TOrder>;` - Тип ответа с заказами - специализированный тип для ответа с заказами

Взаимосвязи типов:
`IApi` → Использует `ApiPostMethods` для определения методов запросов
`TProductsResponse` и `TOrdersResponse` → Наследуют структуру от `IApiResponse<T>`
`TOrder` → Использует `TPayment` и включает данные из `IBuyer`
`IBuyer` → Использует `TPayment` для способа оплаты
`IValidationErrors` → Соответствует полям `IBuyer` для валидации

### Модели данных

### Класс Products

Представляет модель товаров, отвечает за хранение данных о товарах, управление выбранным товаром и уведомление системы об изменениях в данных товаров.

При инициализации:
Инициализирует пустой массив для хранения всех товаров
Устанавливает начальное значение выбранного товара как null
Готовит объект для управления каталогом товаров и процессом выбора товаров

Конструктор:
`constructor(private _events: IEvents)` - создает экземпляр модели товаров

Параметры:
`_events: IEvents` - экземпляр брокера событий для уведомления об изменениях данных товаров

Поля класса:
`private _allProducts: IProduct[]` - массив всех доступных товаров в каталоге
`private _selectedProduct: IProduct | null` - текущий выбранный товар для детального просмотра
`private _events: IEvents` - брокер событий для коммуникации с другими компонентами системы

Методы:
Метод `setProducts(products: IProduct[]): void` - устанавливает список всех товаров

Параметры:
`products: IProduct[]` - массив товаров для загрузки в каталог

Функциональность:
Сохраняет переданный массив товаров во внутреннее хранилище
Генерирует событие `PRODUCTS_RECEIVED` с полным списком товаров для уведомления системы о готовности данных

Метод `setSelectedProduct(product: IProduct): void` - устанавливает выбранный товар

Параметры:
`product: IProduct` - товар, выбранный для детального просмотра

Функциональность:
Сохраняет выбранный товар во внутреннем поле
Генерирует событие `SELECTED_PRODUCT_SET` с данными выбранного товара для открытия модального окна предпросмотра

Метод `getAllProducts(): IProduct[]` - возвращает все товары каталога

Возвращает:
`IProduct[]` - полный массив всех доступных товаров

Метод `getProductById(id: string): IProduct | undefined` - находит товар по идентификатору

Параметры:
`id: string` - уникальный идентификатор товара

Возвращает:
`IProduct | undefined` - найденный товар или undefined если товар не существует

Метод `getSelectedProduct(): IProduct` - возвращает текущий выбранный товар

Возвращает:
`IProduct` - выбранный товар

Функциональность:
Выводит предупреждение в консоль если товар не выбран
Возвращает товар с приведением типа, предполагая что вызывающий код уверен в наличии выбранного товара

Метод `clearSelectedProduct(): void` - очищает выбранный товар

Функциональность:
Сбрасывает значение выбранного товара в null
Используется при закрытии модальных окон для очистки состояния

### Класс Basket

Представляет модель корзины товаров, отвечает за хранение выбранных товаров, расчет общей стоимости и управление состоянием корзины с уведомлением системы об изменениях.

При инициализации:
Создает пустое множество (Set) для хранения товаров в корзине
Использует Set для гарантии уникальности товаров и эффективного управления
Подготавливает объект для управления процессом добавления и удаления товаров

Конструктор:
`constructor(private _events: IEvents)` - создает экземпляр модели корзины

Параметры:
`_events: IEvents` - экземпляр брокера событий для уведомления об изменениях в корзине

Поля класса:
`private _purchases: Set<IProduct>` - множество товаров, добавленных в корзину
`private _events: IEvents` - брокер событий для коммуникации с другими компонентами системы

Методы:
Метод `getPurchases(): IProduct[]` - возвращает массив товаров в корзине

Возвращает:
`IProduct[]` - массив всех товаров, находящихся в корзине

Функциональность:
Преобразует множество товаров в массив для удобства использования
Обеспечивает доступ к списку покупок для отображения в интерфейсе

Метод `getTotalPrice(): number` - вычисляет общую стоимость товаров в корзине

Возвращает:
`number` - суммарная стоимость всех товаров в корзине

Функциональность:
Суммирует цены всех товаров в корзине
Игнорирует товары без цены (null), считая их стоимость как 0
Обеспечивает актуальный расчет общей суммы заказа

Метод `getQuantity(): number` - возвращает количество товаров в корзине

Возвращает:
`number` - количество уникальных товаров в корзине

Функциональность:
Использует свойство size множества для эффективного подсчета
Отражает количество различных товаров (не учитывает количество каждого товара)

Метод `addProduct(product: IProduct): void` - добавляет товар в корзину

Параметры:
`product: IProduct` - товар для добавления в корзину

Функциональность:
Добавляет товар в множество покупок
Генерирует событие `BASKET_COUNT_CHANGE` с обновленным количеством товаров
Гарантирует уникальность товаров в корзине

Метод `removeProduct(product: IProduct): void` - удаляет товар из корзины

Параметры:
`product: IProduct` - товар для удаления из корзины

Функциональность:
Удаляет товар из множества покупок
Генерирует событие `BASKET_COUNT_CHANGE` с обновленным количеством товаров
Обеспечивает синхронное обновление состояния корзины

Метод `isInBasket(id: string): boolean` - проверяет наличие товара в корзине

Параметры:
`id: string` - идентификатор товара для проверки

Возвращает:
`boolean` - `true` если товар находится в корзине, `false` если отсутствует

Функциональность:
Преобразует множество в массив для поиска по идентификатору
Используется для определения состояния кнопок в интерфейсе

Метод `clear(): void` - полностью очищает корзину

Функциональность:
Удаляет все товары из множества покупок
Используется после успешного оформления заказа

### Класс Buyer

Модель данных покупателя для оформления заказа. Хранит контактные данные и способ оплаты.

Конструктор:
`constructor(private _events: IEvents)` - создает модель покупателя

Поля:

`_address` - адрес доставки
`_phone` - телефон
`_email` - email
`_payment` - способ оплаты
`_events` - брокер событий

Сеттеры:

`address` - устанавливает адрес, генерирует событие BUYER_CHANGE
`phone` - устанавливает телефон (с обрезкой пробелов), генерирует событие
`email` - устанавливает email (с обрезкой пробелов), генерирует событие
`payment` - устанавливает способ оплаты, генерирует событие

Методы:
`getAllBuyerData()` - возвращает все данные покупателя
`validate()` - проверяет заполненность полей, возвращает ошибки
`clear()` - очищает все данные

### Слой коммуникации

### Класс ApiClient

Предоставляет данные для Моделей (Products, Basket)
Выполняет бизнес-операции (оформление заказов)
Абстрагирует клиентский код от деталей HTTP взаимодействия
Обрабатывает преобразование данных между форматами API и приложения

Конструктор:
`constructor(protected _api: IApi)` - принимает экземпляр класса, реализующего интерфейс IApi, для выполнения HTTP запросов.

Поля класса:
`protected _api: IApi` - защищенное поле для хранения экземпляра API клиента

Методы:
`getAllProducts(): Promise<IProduct[]>` - Получение списка товаров, выполняет запрос к API для получения каталога товаров
Возвращает Promise с массивом товаров `IProduct[]`
Выполняет GET запрос к эндпоинту `/product/`
Получает ответ в формате `IApiResponse<IProduct>`
Извлекает массив товаров из поля items
Возвращает только массив товаров

`placeOrder(orderData: TOrder): Promise<TOrderResponse>` - Оформление заказа, отправляет данные заказа на сервер
`orderData: TOrder` - данные заказа включая способ оплаты, контакты и список товаров
Возвращает: Promise с ответом сервера TOrderResponse содержащим ID и сумму заказа
Выполняет POST запрос к эндпоинту `/order/`
Передает данные заказа в теле запроса
Возвращает ответ сервера

### Слой представления

### Класс HeaderView

Представляет компонент шапки сайта, отвечающий за отображение и взаимодействие с элементами верхней панели навигации. Наследуется от базового класса `Component<IHeaderData>.`

При инициализации:
Находит DOM-элементы кнопки корзины и счетчика в переданном контейнере
Устанавливает обработчик события клика на кнопку корзины
При клике на кнопку корзины генерирует событие `BASKET_OPEN`, которое обрабатывается другими компонентами системы для открытия модального окна корзины

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления шапки сайта

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку шапки
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _basketButton: HTMLButtonElement` - кнопка корзины, при клике на которую открывается модальное окно с содержимым корзины
`private _basketCounter: HTMLElement` - элемент отображения счетчика товаров в корзине
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set counter(value: number)` - устанавливает значение счетчика товаров в корзине

Параметры:
`value: number` - количество товаров в корзине для отображения

Функциональность:
Преобразует числовое значение в строку
Обновляет текстовое содержимое элемента счетчика
Обеспечивает реактивное отображение изменений количества товаров

### Класс GalleryView

Представляет компонент галереи товаров, отвечающий за отображение каталога продукции в виде сетки карточек. Наследуется от базового класса `Component<IGalleryData>`

При инициализации:
Создает контейнер для отображения галереи товаров без дополнительной обработки событий, так как взаимодействие с отдельными карточками обрабатывается на уровне самих компонентов карточки

Конструктор:
`constructor(container: HTMLElement)` - создает экземпляр представления галереи товаров

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку галереи

Поля класса:
Отсутствуют - класс использует только унаследованные от Component поля и методы

Методы:
Сеттер `set galleryList(items: HTMLElement[])` - обновляет содержимое галереи новым набором карточек товаров

Параметры:
`items: HTMLElement[]` - массив DOM-элементов карточек товаров для отображения в галерее

Функциональность:
Полностью заменяет текущее содержимое контейнера галереи новыми элементами карточек

### Класс BasketView

Представляет компонент корзины товаров, отвечающий за отображение списка выбранных товаров, общей стоимости и управления оформлением заказа. Наследуется от базового класса `Component<IBasketViewData>`

При инициализации:
Находит DOM-элементы списка товаров, кнопки оформления заказа, общей стоимости и сообщения о пустой корзине
Устанавливает обработчик события клика на кнопку оформления заказа
При клике на кнопку оформления заказа генерирует событие `BASKET_PLACE_ORDER`, которое инициирует процесс оформления заказа

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления корзины товаров

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку корзины
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _basketList: HTMLUListElement` - контейнер списка товаров в корзине
`private _submitButton: HTMLButtonElement` - кнопка для перехода к оформлению заказа
`private _totalPrice: HTMLElement` - элемент отображения общей стоимости товаров в корзине
`private _emptyMessage: HTMLElement` - элемент сообщения о пустой корзине
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set basketList(purchases: HTMLElement[])` - обновляет список товаров в корзине

Параметры:
`purchases: HTMLElement[]` - массив DOM-элементов карточек товаров для отображения в корзине

Функциональность:
Полностью заменяет текущее содержимое списка товаров новыми элементами карточек

Сеттер `set totalPrice(value: number)` - устанавливает значение общей стоимости товаров в корзине

Параметры:
`value: number` - общая стоимость всех товаров в корзине

Функциональность:
Форматирует и отображает стоимость с валютой "синапсы"
Обновляет интерфейс при изменении общей суммы заказа

Метод `setButtonText(value: string): void` - изменяет текст на кнопке оформления заказа

Параметры:
`value: string` - новый текст для отображения на кнопке

Метод `setEmptyMessage(value: boolean): void` - управляет видимостью сообщения о пустой корзине

Параметры:
`value: boolean` - флаг, определяющий наличие товаров в корзине

Функциональность:
Скрывает или показывает элемент сообщения о пустой корзине в зависимости от наличия товаров

Метод `toggleSubmitButton(value: boolean): void` - активирует или деактивирует кнопку оформления заказа

Параметры:
`value: boolean` - флаг, определяющий доступность кнопки для взаимодействия

Функциональность:
Включает или отключает кнопку в зависимости от состояния корзины
Предотвращает попытку оформления пустого заказа

### Класс ModalView

Представляет компонент модального окна, отвечающий за отображение всплывающих окон с различным содержимым. Наследуется от базового класса `Component<IModalData>`

При инициализации:
Находит DOM-элементы кнопки закрытия и контейнера содержимого модального окна
Устанавливает обработчики событий для закрытия модального окна:

При клике на кнопку закрытия генерирует событие `MODAL_CLOSE`
При клике на затемненную область вокруг модального окна генерирует событие `MODAL_CLOSE`

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления модального окна

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку модального окна
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _closeButton: HTMLButtonElement` - кнопка закрытия модального окна
`private _content: HTMLElement` - контейнер для отображения содержимого модального окна
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set content(content: HTMLElement)` - обновляет содержимое модального окна

Параметры:
`content: HTMLElement` - DOM-элемент с содержимым для отображения в модальном окне

Функциональность:
Полностью заменяет текущее содержимое модального окна новым элементом
Обеспечивает смену контента без переоткрытия окна

Метод `open(content: HTMLElement): void` - открывает модальное окно с указанным содержимым

Параметры:
`content: HTMLElement` - DOM-элемент с содержимым для отображения

Функциональность:
Устанавливает переданное содержимое в контейнер модального окна
Добавляет CSS-класс для активации видимости окна

Метод `close(): void` - закрывает модальное окно

Функциональность:
Удаляет CSS-класс активности, скрывая модальное окно

Метод `isOpen(): boolean` - проверяет, открыто ли модальное окно в данный момент

Возвращает:
`boolean` - `true` если модальное окно активно, `false` если закрыто

Функциональность:
Проверяет наличие CSS-класса активности у контейнера модального окна
Используется для условной логики в других компонентах системы

### Класс SuccessView

Представляет компонент успешного оформления заказа, отвечающий за отображение подтверждения завершения покупки и информации о списанной сумме. Наследуется от базового класса `Component<ISuccessData>`

При инициализации:
Находит DOM-элементы отображения общей стоимости и кнопки подтверждения
Устанавливает обработчик события клика на кнопку подтверждения
При клике на кнопку подтверждения генерирует событие `SUCCESS_CONFIRM`, которое обрабатывается другими компонентами системы для закрытия модального окна и завершения процесса заказа

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления успешного заказа

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку подтверждения заказа
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _totalPrice: HTMLElement` - элемент отображения итоговой стоимости заказа
`private _confirmButton: HTMLButtonElement` - кнопка подтверждения для завершения процесса заказа
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set totalPrice(value: number)` - устанавливает значение итоговой стоимости выполненного заказа

Параметры:
`value: number` - общая стоимость товаров в выполненном заказе

Функциональность:
Форматирует и отображает сумму списания с валютой "синапсы"
Предоставляет пользователю информацию о финансовой операции
Обновляет интерфейс при отображении подтверждения заказа

### Класс CardView

Представляет абстрактный базовый класс карточки товара, отвечающий за общий функционал всех типов карточек. Наследуется от базового класса `Component<IProduct>` и не может быть инстанциирован напрямую

При инициализации:
Находит DOM-элементы заголовка, цены, изображения и категории товара
Инициализирует идентификатор товара пустой строкой
Обеспечивает базовую структуру для всех видов карточек товаров в системе

Конструктор:
`constructor(container: HTMLElement, protected _events: IEvents)` - создает экземпляр базовой карточки товара

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`protected _id: string` - уникальный идентификатор товара
`protected _title: HTMLElement` - элемент отображения названия товара
`protected _price: HTMLElement` - элемент отображения стоимости товара
`protected _image?: HTMLImageElement` - опциональный элемент изображения товара
`protected _category?: HTMLElement` - опциональный элемент категории товара
`protected _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set id(value: string)` - устанавливает уникальный идентификатор товара

Параметры:
`value: string` - уникальный ID товара для внутреннего использования

Сеттер `set title(value: string)` - устанавливает название товара

Параметры:
`value: string` - текстовое название товара для отображения

Функциональность:
Обновляет текстовое содержимое элемента заголовка карточки

Сеттер `set price(value: number | null)` - устанавливает стоимость товара

Параметры:
`value: number | null` - числовое значение стоимости или `null` для товаров без цены

Функциональность:
Форматирует и отображает стоимость с валютой "синапсы"
Для товаров без цены отображает текст "Бесценно"

Сеттер `set image(src: string)` - устанавливает изображение товара

Параметры:
`src: string` - путь к изображению товара

Функциональность:
Загружает изображение через `CDN` с использованием базового `URL`
Устанавливает альтернативный текст равным названию товара
Игнорирует установку если элемент изображения отсутствует в разметке

Сеттер `set category(name: string)` - устанавливает категорию товара

Параметры:
`name: string` - название категории товара

Функциональность:
Обновляет текстовое содержимое элемента категории
Применяет соответствующие CSS-классы на основе категории товара
Игнорирует установку если элемент категории отсутствует в разметке

Приватный метод `private setCategoryText(value: string): void` - внутренний метод для установки текста категории
Приватный метод `private updateCategoryClass(categoryName: string): void` - внутренний метод для обновления CSS-классов категории на основе сопоставления категорий

### Класс CardForCatalog

Представляет карточку товара для отображения в каталоге/галерее, наследуется от базового класса `CardView`. Отвечает за отображение товаров в основном каталоге магазина и обработку выбора товара для просмотра деталей.

При инициализации:
Наследует всю базовую функциональность карточки товара от родительского класса `CardView`
Устанавливает обработчик события клика на всю область карточки
При клике на карточку генерирует событие `PRODUCT_SELECT` с передачей идентификатора товара, что инициирует открытие детального просмотра товара

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр карточки товара для каталога

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
Не объявляет собственных полей, использует унаследованные от `CardView` защищенные поля

Методы:
Не добавляет новых публичных методов, использует унаследованные сеттеры для установки данных товара

Функциональность:
Предоставляет интерактивный элемент каталога, реагирующий на клики пользователя
Служит точкой входа для перехода к детальному просмотру товара
Сохраняет все возможности базовой карточки по отображению названия, цены, изображения и категории товара

### Класс CardForPreview

Представляет карточку товара для детального просмотра в модальном окне, наследуется от базового класса `CardView`. Отвечает за отображение полной информации о товаре и предоставляет функционал добавления/удаления товара из корзины.

При инициализации:
Наследует всю базовую функциональность карточки товара от родительского класса `CardView`
Находит дополнительные DOM-элементы описания товара и кнопки заказа
Устанавливает обработчик события клика на кнопку заказа
При клике на кнопку генерирует событие `PRODUCT_SUBMIT` с передачей идентификатора товара, что инициирует добавление или удаление товара из корзины

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр карточки товара для предпросмотра

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _description: HTMLElement` - элемент отображения подробного описания товара
`private _orderButton: HTMLButtonElement` - кнопка для добавления/удаления товара из корзины

Методы:
Сеттер `set description(value: string)` - устанавливает подробное описание товара

Параметры:
`value: string` - текстовое описание товара для отображения

Функциональность:
Обновляет текстовое содержимое элемента описания товара
Предоставляет пользователю дополнительную информацию о товаре

Сеттер `set orderButtonText(value: string)` - устанавливает текст на кнопке заказа

Параметры:
`value: string` - текст для отображения на кнопке (например, "Купить", "Удалить из корзины", "Недоступно")

Функциональность:
Динамически изменяет текст кнопки в зависимости от состояния товара и корзины

Метод `toggleOrderButton(value: boolean): void` - активирует или деактивирует кнопку заказа

Параметры:
`value: boolean` - флаг, определяющий доступность кнопки для взаимодействия

Функциональность:
Включает или отключает кнопку в зависимости от доступности товара
Предотвращает попытку заказа недоступного товара

### Класс CardForBasket

Представляет карточку товара для отображения в корзине покупок, наследуется от базового класса `CardView`. Отвечает за отображение товаров в интерфейсе корзины и предоставляет функционал удаления товаров.

При инициализации:
Наследует всю базовую функциональность карточки товара от родительского класса `CardView`
Находит дополнительные DOM-элементы порядкового номера и кнопки удаления
Устанавливает обработчик события клика на кнопку удаления
При клике на кнопку удаления генерирует событие `PRODUCT_DELETE` с передачей идентификатора товара, что инициирует удаление товара из корзины

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр карточки товара для корзины

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _indexElement: HTMLElement` - элемент отображения порядкового номера товара в корзине
`private _deleteButton: HTMLButtonElement` - кнопка для удаления товара из корзины

Методы:
Сеттер `set index(value: number)` - устанавливает порядковый номер товара в списке корзины

Параметры:
`value: number` - числовое значение порядкового номера товара

Функциональность:
Преобразует числовое значение в строку и отображает в интерфейсе
Обеспечивает нумерацию товаров в корзине для удобства восприятия

### Класс FormView

Абстрактный базовый класс для всех форм приложения. Наследуется от `Component<IFormErrorData>`.

Конструктор:
`constructor(container: HTMLElement, protected _events: IEvents)` - создает базовую форму

Поля:
`_submitButton` - кнопка отправки формы
`_error` - контейнер для ошибок
`_events` - брокер событий

Методы:
`error` (сеттер) - устанавливает текст ошибки
`checkIsFormValid(errors)` - абстрактный метод проверки валидности формы
`resetFormState()` - сбрасывает состояние формы (очищает ошибки, блокирует кнопку)
`toggleSubmitButton(value)` - включает/отключает кнопку отправки
`toggleErrorClass(value)` - показывает/скрывает контейнер ошибок
`clearError()` - очищает текст ошибки

### Класс FormOrderView

Форма оформления заказа. Наследуется от FormView.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает форму заказа

Поля:
`_onlinePayButton` - кнопка онлайн-оплаты
`_cashPayButton` - кнопка оплаты наличными
`_address` - поле ввода адреса

Обработчики событий:
Клик по кнопке онлайн-оплаты - `FORM_PAYMENT_CHANGED`
Клик по кнопке наличной оплаты - `FORM_PAYMENT_CHANGED`
Ввод адреса - `FORM_ADDRESS_CHANGED`
Отправка формы - `FORM_ORDER_SUBMIT`
Фокус на поле ввода - `FORM_INPUT_FOCUS`

Методы:
`checkIsFormValid(errors)` - проверяет валидность формы (оплата и адрес)
`resetFormState()` - сбрасывает состояние формы (очищает поля, снимает выделение с кнопок)
`togglePaymentButtonStatus(status)` - выделяет выбранный способ оплаты
`clear()` - очищает поле адреса

### Класс FormContactsView

Форма контактных данных. Наследуется от FormView.

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает форму контактов

Поля:
`_email` - поле ввода email
`_phone` - поле ввода телефона

Обработчики событий:
Ввод email - `FORM_EMAIL_CHANGED`
Ввод телефона - `FORM_PHONE_CHANGED`
Отправка формы - `FORM_CONTACTS_SUBMIT`
Фокус на поле ввода - `FORM_INPUT_FOCUS`

Методы:
`checkIsFormValid(errors)` - проверяет валидность формы (email и телефон)
`resetFormState()` - сбрасывает состояние формы
`clear()` - очищает поля email и телефона

### Презентер

### Класс BasketViewPresenter

Представляет презентер корзины товаров, реализует интерфейс `IBasketViewPresenter`. Отвечает за координацию между моделью корзины и представлением, преобразует данные модели в формат, пригодный для отображения в пользовательском интерфейсе.

При инициализации:
Создает экземпляр презентера, который связывает модель корзины с соответствующим представлением
Использует шаблон карточки товара для генерации элементов корзины
Обеспечивает реактивное обновление интерфейса при изменении состояния корзины

Конструктор:
`constructor(private _basketModel: Basket, private _cardTemplate: HTMLTemplateElement, private _events: IEvents)` - создает экземпляр презентера корзины

Параметры:
`_basketModel: Basket` - экземпляр модели корзины, содержащий данные о товарах
`_cardTemplate: HTMLTemplateElement` - HTML-шаблон для создания карточек товаров в корзине
`_events: IEvents` - экземпляр брокера событий для координации взаимодействия между компонентами

Поля класса:
`private _basketModel: Basket` - модель корзины, предоставляющая данные о товарах и их стоимости
`private _cardTemplate: HTMLTemplateElement` - шаблон для генерации карточек товаров
`private _events: IEvents` - брокер событий для коммуникации между компонентами системы

Методы:
Метод `getViewData(): IBasketViewData` - получает актуальные данные из модели корзины для отображения

Возвращает:
`IBasketViewData` - объект со структурированными данными для представления корзины

Функциональность:
Извлекает из модели список покупок, общую стоимость и количество товаров
Определяет наличие товаров в корзине на основе количества
Подготавливает данные в формате, удобном для использования в представлении

Метод `renderCards(items: IProduct[]): HTMLElement[]` - создает массив DOM-элементов карточек товаров для корзины

Параметры:
`items: IProduct[]` - массив товаров для отображения в корзине

Возвращает:
`HTMLElement[]` - массив DOM-элементов карточек товаров

Функциональность:
Для каждого товара создает экземпляр карточки корзины используя предоставленный шаблон
Устанавливает порядковый номер для каждой карточки (начиная с 1)
Возвращает массив отрендеренных DOM-элементов готовых к вставке в интерфейс

Метод `render(): HTMLElement` - выполняет полную сборку представления корзины

Возвращает:
`HTMLElement` - готовый DOM-элемент представления корзины

Функциональность:
Создает экземпляр представления корзины используя соответствующий шаблон
Получает актуальные данные из модели через метод `getViewData()`
Настраивает представление: устанавливает сообщение о пустой корзине, состояние кнопки оформления, текст кнопки и общую стоимость
В зависимости от наличия товаров наполняет корзину карточками товаров или очищает список
Возвращает полностью собранный DOM-элемент для отображения

### События

### eventsMap

Объект хранит данные событий исрользуемыйх в приложении

Товары:
`PRODUCTS_RECEIVED: 'products:received'` - событие получения списка товаров от сервера
`SELECTED_PRODUCT_SET: 'selected:product:set'` - событие установки выбранного товара для детального просмотра
`PRODUCT_SELECT: 'product:select'` - событие выбора товара из каталога
`PRODUCT_SUBMIT: 'product:submit'` - событие добавления или удаления товара из корзины
`PRODUCT_DELETE: 'product:delete'` - событие удаления товара из корзины

Корзина:
`BASKET_OPEN: 'basket:open'` - событие открытия модального окна корзины
`BASKET_COUNT_CHANGE: 'basket:change'` - событие изменения количества товаров в корзине
`BASKET_PLACE_ORDER: 'basket:place:order'` - событие инициализации процесса оформления заказа

Форма заказа:
`FORM_PAYMENT_CHANGED: 'payment:changed'` - событие изменения способа оплаты
`FORM_ADDRESS_CHANGED: 'address:changed'` - событие изменения адреса доставки
`FORM_ORDER_SUBMIT: 'order:submit'` - событие отправки формы заказа

Форма контактов:
`FORM_EMAIL_CHANGED: 'email:changed'` - событие изменения адреса электронной почты
`FORM_PHONE_CHANGED: 'phone:changed'` - событие изменения номера телефона
`FORM_CONTACTS_SUBMIT: 'contacts:submit'` - событие отправки формы контактов
`FORM_INPUT_FOCUS: 'form:input:focus'` - событие фокусировки на поле ввода формы

Покупатель:
`BUYER_CHANGE: 'buyer:change'` - событие изменения данных покупателя

Успешное размещение заказа:
`SUCCESS_CONFIRM: 'success:confirm'` - событие подтверждения успешного оформления заказа

Модальное окно:
`MODAL_CLOSE: 'modal:close'` - событие закрытия модального окна
