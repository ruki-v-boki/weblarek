# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Vite

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/main.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Интернет-магазин «Web-Larёk»

«Web-Larёk» — это интернет-магазин с товарами для веб-разработчиков, где пользователи могут просматривать товары, добавлять их в корзину и оформлять заказы. Сайт предоставляет удобный интерфейс с модальными окнами для просмотра деталей товаров, управления корзиной и выбора способа оплаты, обеспечивая полный цикл покупки с отправкой заказов на сервер.

## Архитектура приложения

Код приложения разделен на слои согласно парадигме MVP (Model-View-Presenter), которая обеспечивает четкое разделение ответственности между классами слоев Model и View. Каждый слой несет свой смысл и ответственность:

Model - слой данных, отвечает за хранение и изменение данных.  
View - слой представления, отвечает за отображение данных на странице.  
Presenter - презентер содержит основную логику приложения и отвечает за связь представления и данных.

Взаимодействие между классами обеспечивается использованием событийно-ориентированного подхода. Модели и Представления генерируют события при изменении данных или взаимодействии пользователя с приложением, а Презентер обрабатывает эти события используя методы как Моделей, так и Представлений.

### Базовый код

#### Класс Component

Является базовым классом для всех компонентов интерфейса.
Класс является дженериком и принимает в переменной `T` тип данных, которые могут быть переданы в метод `render` для отображения.

Конструктор:  
`constructor(container: HTMLElement)` - принимает ссылку на DOM элемент за отображение, которого он отвечает.

Поля класса:  
`container: HTMLElement` - поле для хранения корневого DOM элемента компонента.

Методы класса:  
`render(data?: Partial<T>): HTMLElement` - Главный метод класса. Он принимает данные, которые необходимо отобразить в интерфейсе, записывает эти данные в поля класса и возвращает ссылку на DOM-элемент. Предполагается, что в классах, которые будут наследоваться от `Component` будут реализованы сеттеры для полей с данными, которые будут вызываться в момент вызова `render` и записывать данные в необходимые DOM элементы.  
`setImage(element: HTMLImageElement, src: string, alt?: string): void` - утилитарный метод для модификации DOM-элементов `<img>`

#### Класс Api

Содержит в себе базовую логику отправки запросов.

Конструктор:  
`constructor(baseUrl: string, options: RequestInit = {})` - В конструктор передается базовый адрес сервера и опциональный объект с заголовками запросов.

Поля класса:  
`baseUrl: string` - базовый адрес сервера  
`options: RequestInit` - объект с заголовками, которые будут использованы для запросов.

Методы:  
`get(uri: string): Promise<object>` - выполняет GET запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер  
`post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>` - принимает объект с данными, которые будут переданы в JSON в теле запроса, и отправляет эти данные на ендпоинт переданный как параметр при вызове метода. По умолчанию выполняется `POST` запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.  
`handleResponse(response: Response): Promise<object>` - защищенный метод проверяющий ответ сервера на корректность и возвращающий объект с данными полученный от сервера или отклоненный промис, в случае некорректных данных.

#### Класс EventEmitter

Брокер событий реализует паттерн "Наблюдатель", позволяющий отправлять события и подписываться на события, происходящие в системе. Класс используется для связи слоя данных и представления.

Конструктор класса не принимает параметров.

Поля класса:  
`_events: Map<string | RegExp, Set<Function>>)` - хранит коллекцию подписок на события. Ключи коллекции - названия событий или регулярное выражение, значения - коллекция функций обработчиков, которые будут вызваны при срабатывании события.

Методы класса:  
`on<T extends object>(event: EventName, callback: (data: T) => void): void` - подписка на событие, принимает название события и функцию обработчик.  
`emit<T extends object>(event: string, data?: T): void` - инициализация события. При вызове события в метод передается название события и объект с данными, который будет использован как аргумент для вызова обработчика.  
`trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void` - возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие с передачей в него данных из второго параметра.

### Данные

### Интерфейс IApi

Интерфейс API клиента - определяет контракт для работы с HTTP API
`get<T extends object>(uri: string): Promise<T>;` - // Выполняет GET запрос
`post<T extends object>(uri: string, data: object, method?: ApiPostMethods): Promise<T>;` - Выполняет POST, PUT или DELETE запрос

### Интерфейс IApiResponse<T>

Интерфейс ответа API - стандартная структура ответа от сервера
`total: number;`- Общее количество элементов
`items: T[];` - Массив элементов указанного типа

### Интерфейс IProduct

Описывает данные необходимые для карточки товара

Поля интерфейса:
`id: string` - уникальный идентефикатор
`title: string` - название/заголовок
`price: number | null` - стоимость, цена может быть не указана
`description?: string` - подробное текстовое описание (опциональное поле)
`image?: string` - изображение (опциональное поле)
`category?: string` - категория (опциональное поле)

### Интерфейс IBuyer

Описывает данные пользователя-покупателя

Поля интерфейса:
`payment: TPayment` - выбранный способ оплаты, значение хранит тип с несколькими вариантами на выбор покупателя
`email: string` - контактный адрес электронной почты
`phone: string` - контактный номер телефона
`address: string` - адрес доставки

### Интерфейс IValidationErrors

Интерфейс ошибок валидации - описывает структуру ошибок проверки данных
Все поля опциональны

Поля интерфейса:
`payment?: string;` - сообщение об ошибке способа оплаты
`email?: string;` - сообщение об ошибке email
`phone?: string;` - сообщение об ошибке телефона
`address?: string;` - сообщение об ошибке адреса

### Интерфейс IHeaderData

Описывает данные имеющиеся в хэдере

Поля интерфейса:
`counter: number` - счетчик товаров в корзине

### Интерфейс IGalleryData

Описывает данные имеющиеся в галерее/каталоге

Поля интерфейса:
`galleryList: HTMLElement[]` - контейнер для отображения галереи/каталога

### Интерфейс IModalData

Описывает данные имеющиеся в модальном окне

Поля интерфейса:
`content: HTMLElement` - контейнер для контента модального окна

### Интерфейс ISuccessData

Описывает данные элемента для отображении успешного заказа

Поля интерфейса:
`totalPrice: number` - полная стоимость товаров в заказе

### Интерфейс IFormErrorData

Описывает данные ошибок в формах

Поля интерфейса:
`error: string` - текст ошибок

### Интерфейс IBasketViewData

Описывает данные отображения корзины

Поля интерфейса:
`totalPrice: number` - полная стоимость товаров в корзине
`purchases: IProduct[]` - массив товаров в корзине
`quantity: number` - колличество товаров в корзине
`hasProducts: boolean` - булево значение наличия товаров в корзине

### Интерфейс IBasketViewPresenter

Описывает данные класса - презентора корзины

Поля интерфейса:
`getViewData(): IBasketViewData` - получает актуальные данные из модели корзины для отображения. Собирает информацию о текущих покупках, общей стоимости, количестве товаров и наличии товаров в корзине. Возвращает структурированный объект с данными для представления
`renderCards(items: IProduct[]): HTMLElement[]` - создает и возвращает массив DOM-элементов карточек товаров для отображения в корзине. Для каждого товара из переданного массива создает экземпляр карточки корзины, устанавливает порядковый номер и возвращает отрендеренный DOM-элемент
`render(): HTMLElement` - выполняет полную сборку представления корзины. Создает основной контейнер корзины, наполняет его карточками товаров (если они есть), устанавливает общую стоимость, состояние кнопки оформления заказа и текст сообщения о пустой корзине. Возвращает готовый DOM-элемент для вставки на страницу или модальное окно

### Типы

### Тип ApiPostMethods

`type ApiPostMethods = 'POST' | 'PUT' | 'DELETE';` - Тип HTTP методов - определяет допустимые методы для POST запросов

### Тип TPayment

`type TPayment = 'online' | 'cash' | ''` - тип ограниченных вариантов выбора способа оплаты - онлайн оплата, наличными при получении или может быть не выбран

### Тип TOrder

Тип заказа - структура данных для оформления заказа
`payment: TPayment;` - Способ оплаты
`email: string;` - Email покупателя
`phone: string;` - Телефон покупателя
`address: string;` - Адрес доставки
`total: number;` - Общая сумма заказа
`items: string[];` - Массив ID товаров

### Тип TOrderResponse

Тип ответа на заказ - структура ответа после успешного оформления заказа
`id: string;` - ID созданного заказа
`total: number;` - Общая сумма заказа

### Тип TProductsResponse

`type TProductsResponse = IApiResponse<IProduct>` - Тип ответа с товарами - специализированный тип для ответа с товарами

### Тип TOrdersResponse

`type TOrdersResponse = IApiResponse<TOrder>;` - Тип ответа с заказами - специализированный тип для ответа с заказами

Взаимосвязи типов:
`IApi` → Использует `ApiPostMethods` для определения методов запросов
`TProductsResponse` и `TOrdersResponse` → Наследуют структуру от `IApiResponse<T>`
`TOrder` → Использует `TPayment` и включает данные из `IBuyer`
`IBuyer` → Использует `TPayment` для способа оплаты
`IValidationErrors` → Соответствует полям `IBuyer` для валидации

### Модели данных

### Класс Products

Является моделью данных, отвечающей за хранение и управление информацией о товарах. Класс следует принципам инкапсуляции, предоставляя контролируемый интерфейс для работы с данными товаров. Все изменения состояния происходят через явно определенные методы, что обеспечивает предсказуемость поведения и легкую отладку

Конструктор:
Инициализирует приватное поле брокера событий, пустой массив товаров и сбрасывает выбранный товар

Поля класса:
`private _events: IEvents` - приватное поле брокера событий для обработки пользовательских действий
`private _allProducts: IProduct[] = []` - приватное поле для хранения массива всех товаров
`protected _selectedProduct: IProduct | null = null` - защищенное поле для хранения текущего выбранного товара

Методы:
`setProducts(products: IProduct[])` - устанавливает массив товаров в модель
`setSelectedProduct(product: IProduct)` - устанавливает выбранный товар

`getAllProducts(): IProduct[]` - возвращает массив всех товаров
`getProductById(id: string): IProduct | undefined` - возвращает товар по указанному идентификатору или undefined если товар не найден
`getSelectedProduct(): IProduct | null` - возвращает текущий выбранный товар или null если товар не выбран
`clearSelectedProduct(): void ` - очищает поле выбранного товара

### Класс Basket

Является моделью данных, отвечающей за хранение и управление корзиной покупок.
Использует структуру данных Set для гарантии уникальности товаров в корзине.

Конструктор инициализирует пустую корзину покупок.

Поля класса:
`private _events: IEvents` - приватное поле брокера событий для обработки пользовательских действий
`private _purchases: Set<IProduct> = new Set()` - приватное поле для хранения товаров в корзине с использованием структуры Set, что обеспечивает уникальность товаров

Методы:
`getPurchases(): IProduct[]` - возвращает массив всех товаров в корзине
`getTotalPrice(): number` - вычисляет и возвращает общую стоимость всех товаров в корзине
`getQuantity(): number` - возвращает количество уникальных товаров в корзине
`addProduct(product: IProduct)` - добавляет товар в корзину
`removeProduct(product: IProduct)` - удаляет товар из корзины
`isInBasket(id: string): boolean` - проверяет наличие товара в корзине по идентификатору
`clear(): void ` - очищает массив всех товаров в корзине

### Класс Buyer

Является моделью данных, отвечающей за хранение и управление информацией о покупателе. Обеспечивает инкапсуляцию данных покупателя, автоматическую очистку входных данных, централизованную валидацию всех полей и легкий сброс данных

Конструктор инициализирует приватное поле брокера событий для обработки пользовательских действий и данные покупателя с пустыми значениями

Поля класса:
`private _events: IEvents` - приватное поля для брокера событий для обработки пользовательских действий
`private _address: string` - приватное поле для хранения адреса доставки
`private _phone: string` - приватное поле для хранения номера телефона
`private _email: string` - приватное поле для хранения email адреса
`private _payment: TPayment` - приватное поле для хранения способа оплаты

Методы:
`setBuyerData(data: IBuyer)` - устанавливает все данные покупателя из объекта, применяя trim() к телефону и email для очистки от лишних пробелов
`getBuyerData(): IBuyer` - возвращает объект со всеми данными покупателя
`validate(): IValidationErrors` - выполняет валидацию данных и возвращает объект с сообщениями о статусе проверки каждого поля
`clear(): void` - очищает все данные покупателя

### Слой коммуникации

### Класс ApiClient

Предоставляет данные для Моделей (Products, Basket)
Выполняет бизнес-операции (оформление заказов)
Абстрагирует клиентский код от деталей HTTP взаимодействия
Обрабатывает преобразование данных между форматами API и приложения

Конструктор:
`constructor(protected _api: IApi)` - принимает экземпляр класса, реализующего интерфейс IApi, для выполнения HTTP запросов.

Поля класса:
`protected _api: IApi` - защищенное поле для хранения экземпляра API клиента

Методы:
`getAllProducts(): Promise<IProduct[]>` - Получение списка товаров, выполняет запрос к API для получения каталога товаров
Возвращает Promise с массивом товаров `IProduct[]`
Выполняет GET запрос к эндпоинту `/product/`
Получает ответ в формате `IApiResponse<IProduct>`
Извлекает массив товаров из поля items
Возвращает только массив товаров

`placeOrder(orderData: TOrder): Promise<TOrderResponse>` - Оформление заказа, отправляет данные заказа на сервер
`orderData: TOrder` - данные заказа включая способ оплаты, контакты и список товаров
Возвращает: Promise с ответом сервера TOrderResponse содержащим ID и сумму заказа
Выполняет POST запрос к эндпоинту `/order/`
Передает данные заказа в теле запроса
Возвращает ответ сервера

### Слой представления

### Класс HeaderView

Представляет компонент шапки сайта, отвечающий за отображение и взаимодействие с элементами верхней панели навигации. Наследуется от базового класса `Component<IHeaderData>.`

При инициализации:
Находит DOM-элементы кнопки корзины и счетчика в переданном контейнере
Устанавливает обработчик события клика на кнопку корзины
При клике на кнопку корзины генерирует событие `eventsMap.BASKET_OPEN`, которое обрабатывается другими компонентами системы для открытия модального окна корзины

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления шапки сайта

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку шапки
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _basketButton: HTMLButtonElement` - кнопка корзины, при клике на которую открывается модальное окно с содержимым корзины
`private _basketCounter: HTMLElement` - элемент отображения счетчика товаров в корзине
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set counter(value: number)` - устанавливает значение счетчика товаров в корзине

Параметры:
`value: number` - количество товаров в корзине для отображения

Функциональность:
Преобразует числовое значение в строку
Обновляет текстовое содержимое элемента счетчика
Обеспечивает реактивное отображение изменений количества товаров

### Класс GalleryView

Представляет компонент галереи товаров, отвечающий за отображение каталога продукции в виде сетки карточек. Наследуется от базового класса `Component<IGalleryData>`

При инициализации:
Создает контейнер для отображения галереи товаров без дополнительной обработки событий, так как взаимодействие с отдельными карточками обрабатывается на уровне самих компонентов карточки

Конструктор:
`constructor(container: HTMLElement)` - создает экземпляр представления галереи товаров

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку галереи

Поля класса:
Отсутствуют - класс использует только унаследованные от Component поля и методы

Методы:
Сеттер `set galleryList(items: HTMLElement[])` - обновляет содержимое галереи новым набором карточек товаров

Параметры:
`items: HTMLElement[]` - массив DOM-элементов карточек товаров для отображения в галерее

Функциональность:
Полностью заменяет текущее содержимое контейнера галереи новыми элементами карточек

### Класс BasketView

Представляет компонент корзины товаров, отвечающий за отображение списка выбранных товаров, общей стоимости и управления оформлением заказа. Наследуется от базового класса `Component<IBasketViewData>`

При инициализации:
Находит DOM-элементы списка товаров, кнопки оформления заказа, общей стоимости и сообщения о пустой корзине
Устанавливает обработчик события клика на кнопку оформления заказа
При клике на кнопку оформления заказа генерирует событие `eventsMap.BASKET_PLACE_ORDER`, которое инициирует процесс оформления заказа

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления корзины товаров

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку корзины
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _basketList: HTMLUListElement` - контейнер списка товаров в корзине
`private _submitButton: HTMLButtonElement` - кнопка для перехода к оформлению заказа
`private _totalPrice: HTMLElement` - элемент отображения общей стоимости товаров в корзине
`private _emptyMessage: HTMLElement` - элемент сообщения о пустой корзине
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set basketList(purchases: HTMLElement[])` - обновляет список товаров в корзине

Параметры:
`purchases: HTMLElement[]` - массив DOM-элементов карточек товаров для отображения в корзине

Функциональность:
Полностью заменяет текущее содержимое списка товаров новыми элементами карточек

Сеттер `set totalPrice(value: number)` - устанавливает значение общей стоимости товаров в корзине

Параметры:
`value: number` - общая стоимость всех товаров в корзине

Функциональность:
Форматирует и отображает стоимость с валютой "синапсы"
Обновляет интерфейс при изменении общей суммы заказа

Метод `setButtonText(value: string): void` - изменяет текст на кнопке оформления заказа

Параметры:
`value: string` - новый текст для отображения на кнопке

Метод `setEmptyMessage(value: boolean): void` - управляет видимостью сообщения о пустой корзине

Параметры:
`value: boolean` - флаг, определяющий наличие товаров в корзине

Функциональность:
Скрывает или показывает элемент сообщения о пустой корзине в зависимости от наличия товаров

Метод `toggleSubmitButton(value: boolean): void` - активирует или деактивирует кнопку оформления заказа

Параметры:
`value: boolean` - флаг, определяющий доступность кнопки для взаимодействия

Функциональность:
Включает или отключает кнопку в зависимости от состояния корзины
Предотвращает попытку оформления пустого заказа

### Класс ModalView

Представляет компонент модального окна, отвечающий за отображение всплывающих окон с различным содержимым. Наследуется от базового класса `Component<IModalData>`

При инициализации:
Находит DOM-элементы кнопки закрытия и контейнера содержимого модального окна
Устанавливает обработчики событий для закрытия модального окна:

При клике на кнопку закрытия генерирует событие `eventsMap.MODAL_CLOSE`
При клике на затемненную область вокруг модального окна генерирует событие `eventsMap.MODAL_CLOSE`

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления модального окна

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку модального окна
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _closeButton: HTMLButtonElement` - кнопка закрытия модального окна
`private _content: HTMLElement` - контейнер для отображения содержимого модального окна
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set content(content: HTMLElement)` - обновляет содержимое модального окна

Параметры:
`content: HTMLElement` - DOM-элемент с содержимым для отображения в модальном окне

Функциональность:
Полностью заменяет текущее содержимое модального окна новым элементом
Обеспечивает смену контента без переоткрытия окна

Метод `open(content: HTMLElement): void` - открывает модальное окно с указанным содержимым

Параметры:
`content: HTMLElement` - DOM-элемент с содержимым для отображения

Функциональность:
Устанавливает переданное содержимое в контейнер модального окна
Добавляет CSS-класс для активации видимости окна

Метод `close(): void` - закрывает модальное окно

Функциональность:
Удаляет CSS-класс активности, скрывая модальное окно

Метод `isOpen(): boolean` - проверяет, открыто ли модальное окно в данный момент

Возвращает:
`boolean` - `true` если модальное окно активно, `false` если закрыто

Функциональность:
Проверяет наличие CSS-класса активности у контейнера модального окна
Используется для условной логики в других компонентах системы

### Класс SuccessView

Представляет компонент успешного оформления заказа, отвечающий за отображение подтверждения завершения покупки и информации о списанной сумме. Наследуется от базового класса `Component<ISuccessData>`

При инициализации:
Находит DOM-элементы отображения общей стоимости и кнопки подтверждения
Устанавливает обработчик события клика на кнопку подтверждения
При клике на кнопку подтверждения генерирует событие `eventsMap.SUCCESS_CONFIRM`, которое обрабатывается другими компонентами системы для закрытия модального окна и завершения процесса заказа

Конструктор:
`constructor(container: HTMLElement, private _events: IEvents)` - создает экземпляр представления успешного заказа

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку подтверждения заказа
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _totalPrice: HTMLElement` - элемент отображения итоговой стоимости заказа
`private _confirmButton: HTMLButtonElement` - кнопка подтверждения для завершения процесса заказа
`private _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set totalPrice(value: number)` - устанавливает значение итоговой стоимости выполненного заказа

Параметры:
`value: number` - общая стоимость товаров в выполненном заказе

Функциональность:
Форматирует и отображает сумму списания с валютой "синапсы"
Предоставляет пользователю информацию о финансовой операции
Обновляет интерфейс при отображении подтверждения заказа

### Класс CardView

Представляет абстрактный базовый класс карточки товара, отвечающий за общий функционал всех типов карточек. Наследуется от базового класса `Component<IProduct>` и не может быть инстанциирован напрямую

При инициализации:
Находит DOM-элементы заголовка, цены, изображения и категории товара
Инициализирует идентификатор товара пустой строкой
Обеспечивает базовую структуру для всех видов карточек товаров в системе

Конструктор:
`constructor(container: HTMLElement, protected _events: IEvents)` - создает экземпляр базовой карточки товара

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`protected _id: string` - уникальный идентификатор товара
`protected _title: HTMLElement` - элемент отображения названия товара
`protected _price: HTMLElement` - элемент отображения стоимости товара
`protected _image?: HTMLImageElement` - опциональный элемент изображения товара
`protected _category?: HTMLElement` - опциональный элемент категории товара
`protected _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set id(value: string)` - устанавливает уникальный идентификатор товара

Параметры:
`value: string` - уникальный ID товара для внутреннего использования

Сеттер `set title(value: string)` - устанавливает название товара

Параметры:
`value: string` - текстовое название товара для отображения

Функциональность:
Обновляет текстовое содержимое элемента заголовка карточки

Сеттер `set price(value: number | null)` - устанавливает стоимость товара

Параметры:
`value: number | null` - числовое значение стоимости или `null` для товаров без цены

Функциональность:
Форматирует и отображает стоимость с валютой "синапсы"
Для товаров без цены отображает текст "Бесценно"

Сеттер `set image(src: string)` - устанавливает изображение товара

Параметры:
`src: string` - путь к изображению товара

Функциональность:
Загружает изображение через `CDN` с использованием базового `URL`
Устанавливает альтернативный текст равным названию товара
Игнорирует установку если элемент изображения отсутствует в разметке

Сеттер `set category(name: string)` - устанавливает категорию товара

Параметры:
`name: string` - название категории товара

Функциональность:
Обновляет текстовое содержимое элемента категории
Применяет соответствующие CSS-классы на основе категории товара
Игнорирует установку если элемент категории отсутствует в разметке

Приватный метод `private setCategoryText(value: string): void` - внутренний метод для установки текста категории
Приватный метод `private updateCategoryClass(categoryName: string): void` - внутренний метод для обновления CSS-классов категории на основе сопоставления категорий

### Класс CardForCatalog

Представляет карточку товара для отображения в каталоге/галерее, наследуется от базового класса `CardView`. Отвечает за отображение товаров в основном каталоге магазина и обработку выбора товара для просмотра деталей.

При инициализации:
Наследует всю базовую функциональность карточки товара от родительского класса `CardView`
Устанавливает обработчик события клика на всю область карточки
При клике на карточку генерирует событие `eventsMap.PRODUCT_SELECT` с передачей идентификатора товара, что инициирует открытие детального просмотра товара

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр карточки товара для каталога

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
Не объявляет собственных полей, использует унаследованные от `CardView` защищенные поля

Методы:
Не добавляет новых публичных методов, использует унаследованные сеттеры для установки данных товара

Функциональность:
Предоставляет интерактивный элемент каталога, реагирующий на клики пользователя
Служит точкой входа для перехода к детальному просмотру товара
Сохраняет все возможности базовой карточки по отображению названия, цены, изображения и категории товара

### Класс CardForPreview

Представляет карточку товара для детального просмотра в модальном окне, наследуется от базового класса `CardView`. Отвечает за отображение полной информации о товаре и предоставляет функционал добавления/удаления товара из корзины.

При инициализации:
Наследует всю базовую функциональность карточки товара от родительского класса `CardView`
Находит дополнительные DOM-элементы описания товара и кнопки заказа
Устанавливает обработчик события клика на кнопку заказа
При клике на кнопку генерирует событие `eventsMap.PRODUCT_SUBMIT` с передачей идентификатора товара, что инициирует добавление или удаление товара из корзины

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр карточки товара для предпросмотра

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _description: HTMLElement` - элемент отображения подробного описания товара
`private _orderButton: HTMLButtonElement` - кнопка для добавления/удаления товара из корзины

Методы:
Сеттер `set description(value: string)` - устанавливает подробное описание товара

Параметры:
`value: string` - текстовое описание товара для отображения

Функциональность:
Обновляет текстовое содержимое элемента описания товара
Предоставляет пользователю дополнительную информацию о товаре

Сеттер `set orderButtonText(value: string)` - устанавливает текст на кнопке заказа

Параметры:
`value: string` - текст для отображения на кнопке (например, "Купить", "Удалить из корзины", "Недоступно")

Функциональность:
Динамически изменяет текст кнопки в зависимости от состояния товара и корзины

Метод `toggleOrderButton(value: boolean): void` - активирует или деактивирует кнопку заказа

Параметры:
`value: boolean` - флаг, определяющий доступность кнопки для взаимодействия

Функциональность:
Включает или отключает кнопку в зависимости от доступности товара
Предотвращает попытку заказа недоступного товара

### Класс CardForBasket

Представляет карточку товара для отображения в корзине покупок, наследуется от базового класса `CardView`. Отвечает за отображение товаров в интерфейсе корзины и предоставляет функционал удаления товаров.

При инициализации:
Наследует всю базовую функциональность карточки товара от родительского класса `CardView`
Находит дополнительные DOM-элементы порядкового номера и кнопки удаления
Устанавливает обработчик события клика на кнопку удаления
При клике на кнопку удаления генерирует событие `eventsMap.PRODUCT_DELETE` с передачей идентификатора товара, что инициирует удаление товара из корзины

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр карточки товара для корзины

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку карточки товара
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _indexElement: HTMLElement` - элемент отображения порядкового номера товара в корзине
`private _deleteButton: HTMLButtonElement` - кнопка для удаления товара из корзины

Методы:
Сеттер `set index(value: number)` - устанавливает порядковый номер товара в списке корзины

Параметры:
`value: number` - числовое значение порядкового номера товара

Функциональность:
Преобразует числовое значение в строку и отображает в интерфейсе
Обеспечивает нумерацию товаров в корзине для удобства восприятия

### Класс FormView

Представляет абстрактный базовый класс для всех форм в приложении, наследуется от базового класса `Component<IFormErrorData>`. Отвечает за общий функционал всех типов форм и не может быть инстанциирован напрямую.

При инициализации:
Находит DOM-элементы кнопки отправки формы и контейнера для отображения ошибок
Обеспечивает базовую структуру и поведение для всех видов форм в системе
Определяет обязательный интерфейс для реализации в дочерних классах

Конструктор:
`constructor(container: HTMLElement, protected _events: IEvents)` - создает экземпляр базовой формы

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку формы
`_events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`protected _submitButton: HTMLButtonElement` - кнопка отправки формы
`protected _error: HTMLElement` - контейнер для отображения сообщений об ошибках
`protected _events: IEvents` - экземпляр брокера событий для координации взаимодействия с другими компонентами системы

Методы:
Сеттер `set error(message: string)` - устанавливает сообщение об ошибке валидации

Параметры:
`message: string` - текстовое сообщение об ошибке для отображения пользователю

Функциональность:
Обновляет текстовое содержимое элемента ошибок
Используется для показа пользователю информации о проблемах с введенными данными

Метод `toggleSubmitButton(value: boolean): void` - активирует или деактивирует кнопку отправки формы

Параметры:
`value: boolean` - флаг, определяющий доступность кнопки для взаимодействия

Функциональность:
Включает или отключает кнопку отправки в зависимости от валидности данных
Предотвращает отправку некорректно заполненных форм

Метод `toggleErrorClass(value: boolean): void` - управляет видимостью контейнера ошибок

Параметры:
`value: boolean` - флаг, определяющий необходимость показа ошибок

Функциональность:
Добавляет или удаляет CSS-класс для отображения/скрытия контейнера ошибок
Обеспечивает визуальную обратную связь при наличии ошибок валидации

Метод `clearError(): void` - очищает сообщения об ошибках

Функциональность:
Удаляет текстовое содержимое из контейнера ошибок
Используется при сбросе формы или исправлении ошибок

Абстрактный метод `abstract checkIsFormValid(errors: IValidationErrors): boolean` - определяет контракт для проверки валидности формы

Параметры:
`errors: IValidationErrors` - объект с ошибками валидации полей формы

Возвращает:
`boolean` - `true` если форма валидна, `false` если есть ошибки

Функциональность:
Должен быть реализован в каждом дочернем классе формы
Определяет специфическую для каждой формы логику проверки данных

### Класс FormOrderView

Представляет форму оформления заказа, наследуется от базового класса `FormView`. Отвечает за сбор информации о способе оплаты и адресе доставки для оформления заказа.

При инициализации:
Наследует базовую функциональность формы от родительского класса `FormView`
Находит DOM-элементы кнопок выбора способа оплаты и поля ввода адреса
Устанавливает обработчики событий для:

Выбора онлайн-оплаты с генерацией события `eventsMap.FORM_PAYMENT_CHANGED`
Выбора наличной оплаты с генерацией события `eventsMap.FORM_PAYMENT_CHANGED`
Ввода адреса доставки с генерацией события `eventsMap.FORM_ADDRESS_CHANGED`
Отправки формы с генерацией события `eventsMap.FORM_ORDER_SUBMIT`
Фокуса на полях ввода с генерацией события `eventsMap.FORM_INPUT_FOCUS`

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр формы оформления заказа

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку формы заказа
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _onlinePayButton: HTMLButtonElement` - кнопка выбора онлайн-оплаты
`private _cashPayButton: HTMLButtonElement` - кнопка выбора наличной оплаты
`private _address: HTMLInputElement` - поле ввода адреса доставки

Методы:
Метод `togglePaymentButtonStatus(button: HTMLButtonElement, status: boolean): void` - изменяет визуальное состояние кнопки оплаты

Параметры:
`button: HTMLButtonElement` - кнопка оплаты, состояние которой нужно изменить
`status: boolean` - флаг активного состояния кнопки

Функциональность:
Добавляет или удаляет CSS-класс для визуального выделения выбранного способа оплаты

Метод `checkIsFormValid(errors: IValidationErrors): boolean` - проверяет валидность данных формы заказа

Параметры:
`errors: IValidationErrors` - объект с ошибками валидации полей формы

Возвращает:
`boolean` - `true` если форма валидна, `false` если есть ошибки

Функциональность:
Очищает предыдущие сообщения об ошибках
Отображает ошибки, связанные с выбором оплаты или адресом доставки
Возвращает `true` только если отсутствуют ошибки оплаты и адреса
Реализует обязательный метод абстрактного класса `FormView`

### Класс FormContactsView

Представляет форму контактных данных, наследуется от базового класса `FormView`. Отвечает за сбор контактной информации пользователя (email и телефон) для завершения оформления заказа.

При инициализации:
Наследует базовую функциональность формы от родительского класса `FormView`
Находит DOM-элементы полей ввода email и телефона
Устанавливает обработчики событий для:

Ввода email с генерацией события `eventsMap.FORM_EMAIL_CHANGED`
Ввода телефона с генерацией события `eventsMap.FORM_PHONE_CHANGED`
Отправки формы с генерацией события `eventsMap.FORM_CONTACTS_SUBMIT`
Фокуса на полях ввода с генерацией события `eventsMap.FORM_INPUT_FOCUS`

Конструктор:
`constructor(container: HTMLElement, events: IEvents)` - создает экземпляр формы контактных данных

Параметры:
`container: HTMLElement` - корневой DOM-элемент, содержащий разметку формы контактов
`events: IEvents` - экземпляр брокера событий для обработки пользовательских действий

Поля класса:
`private _email: HTMLInputElement` - поле ввода адреса электронной почты
`private _phone: HTMLInputElement` - поле ввода номера телефона

Методы:
Метод `checkIsFormValid(errors: IValidationErrors): boolean` - проверяет валидность контактных данных формы

Параметры:
`errors: IValidationErrors` - объект с ошибками валидации полей формы

Возвращает:
`boolean` - `true` если форма валидна, `false` если есть ошибки

Функциональность:
Очищает предыдущие сообщения об ошибках
Отображает ошибки, связанные с email или телефоном
Возвращает `true` только если отсутствуют ошибки email и телефона
Реализует обязательный метод абстрактного класса `FormView`

### Презентер

### Класс BasketViewPresenter

Представляет презентер корзины товаров, реализует интерфейс `IBasketViewPresenter`. Отвечает за координацию между моделью корзины и представлением, преобразует данные модели в формат, пригодный для отображения в пользовательском интерфейсе.

При инициализации:
Создает экземпляр презентера, который связывает модель корзины с соответствующим представлением
Использует шаблон карточки товара для генерации элементов корзины
Обеспечивает реактивное обновление интерфейса при изменении состояния корзины

Конструктор:
`constructor(private _basketModel: Basket, private _cardTemplate: HTMLTemplateElement, private _events: IEvents)` - создает экземпляр презентера корзины

Параметры:
`_basketModel: Basket` - экземпляр модели корзины, содержащий данные о товарах
`_cardTemplate: HTMLTemplateElement` - HTML-шаблон для создания карточек товаров в корзине
`_events: IEvents` - экземпляр брокера событий для координации взаимодействия между компонентами

Поля класса:
`private _basketModel: Basket` - модель корзины, предоставляющая данные о товарах и их стоимости
`private _cardTemplate: HTMLTemplateElement` - шаблон для генерации карточек товаров
`private _events: IEvents` - брокер событий для коммуникации между компонентами системы

Методы:
Метод `getViewData(): IBasketViewData` - получает актуальные данные из модели корзины для отображения

Возвращает:
`IBasketViewData` - объект со структурированными данными для представления корзины

Функциональность:
Извлекает из модели список покупок, общую стоимость и количество товаров
Определяет наличие товаров в корзине на основе количества
Подготавливает данные в формате, удобном для использования в представлении

Метод `renderCards(items: IProduct[]): HTMLElement[]` - создает массив DOM-элементов карточек товаров для корзины

Параметры:
`items: IProduct[]` - массив товаров для отображения в корзине

Возвращает:
`HTMLElement[]` - массив DOM-элементов карточек товаров

Функциональность:
Для каждого товара создает экземпляр карточки корзины используя предоставленный шаблон
Устанавливает порядковый номер для каждой карточки (начиная с 1)
Возвращает массив отрендеренных DOM-элементов готовых к вставке в интерфейс

Метод `render(): HTMLElement` - выполняет полную сборку представления корзины

Возвращает:
`HTMLElement` - готовый DOM-элемент представления корзины

Функциональность:
Создает экземпляр представления корзины используя соответствующий шаблон
Получает актуальные данные из модели через метод `getViewData()`
Настраивает представление: устанавливает сообщение о пустой корзине, состояние кнопки оформления, текст кнопки и общую стоимость
В зависимости от наличия товаров наполняет корзину карточками товаров или очищает список
Возвращает полностью собранный DOM-элемент для отображения

### События

### eventsMap

Объект хранит данные событий исрользуемыйх в приложении

Товары:
`PRODUCTS_RECEIVED: 'products:received'` - событие получения списка товаров от сервера
`SELECTED_PRODUCT_SET: 'selected:product:set'` - событие установки выбранного товара для детального просмотра
`PRODUCT_SELECT: 'product:select'` - событие выбора товара из каталога
`PRODUCT_SUBMIT: 'product:submit'` - событие добавления или удаления товара из корзины
`PRODUCT_DELETE: 'product:delete'` - событие удаления товара из корзины

Корзина:
`BASKET_OPEN: 'basket:open'` - событие открытия модального окна корзины
`BASKET_COUNT_CHANGE: 'basket:change'` - событие изменения количества товаров в корзине
`BASKET_PLACE_ORDER: 'basket:place:order'` - событие инициализации процесса оформления заказа

Форма заказа:
`FORM_PAYMENT_CHANGED: 'payment:changed'` - событие изменения способа оплаты
`FORM_ADDRESS_CHANGED: 'address:changed'` - событие изменения адреса доставки
`FORM_ORDER_SUBMIT: 'order:submit'` - событие отправки формы заказа

Форма контактов:
`FORM_EMAIL_CHANGED: 'email:changed'` - событие изменения адреса электронной почты
`FORM_PHONE_CHANGED: 'phone:changed'` - событие изменения номера телефона
`FORM_CONTACTS_SUBMIT: 'contacts:submit'` - событие отправки формы контактов
`FORM_INPUT_FOCUS: 'form:input:focus'` - событие фокусировки на поле ввода формы

Покупатель:
`BUYER_CHANGE: 'buyer:change'` - событие изменения данных покупателя

Успешное размещение заказа:
`SUCCESS_CONFIRM: 'success:confirm'` - событие подтверждения успешного оформления заказа

Модальное окно:
`MODAL_CLOSE: 'modal:close'` - событие закрытия модального окна
